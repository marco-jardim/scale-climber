<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Scale Climber - A vocal pitch training game to help you learn to sing in tune">
  <meta name="theme-color" content="#4a90e2">

  <title>Scale Climber - Vocal Pitch Training Game</title>

  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="manifest" href="/scale-climber/manifest.json">

  <script type="module" crossorigin src="/scale-climber/assets/index-JowH2Fap.js"></script>
  <link rel="modulepreload" crossorigin href="/scale-climber/assets/audio-D-pHvAC-.js">
  <link rel="modulepreload" crossorigin href="/scale-climber/assets/game-logic-DIPB9U6A.js">
  <link rel="modulepreload" crossorigin href="/scale-climber/assets/visuals-DAVB2UIO.js">
  <link rel="stylesheet" crossorigin href="/scale-climber/assets/index-DMx1TWnX.css">
<link rel="manifest" href="/scale-climber/manifest.webmanifest"><script id="vite-plugin-pwa:register-sw" src="/scale-climber/registerSW.js"></script></head>
<body>
  <!-- Screen reader announcements -->
  <div id="status-announce" aria-live="polite" aria-atomic="true" class="sr-only"></div>

  <div id="app" role="application" aria-label="Scale Climber - Vocal Pitch Training Game">
    <!-- Skip to main content link for keyboard users -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- New Title Screen (Basecamp at Night) -->
    <div id="title-screen-layer" class="screen" role="region" aria-label="Title Screen">
      <canvas id="title-canvas"></canvas>
      <div class="title-ui-overlay">
        <div class="header-row">
          <span class="brand">SCALE CLIMBER</span>
          <div class="header-actions">
            <button class="icon-btn" title="Daily Rush">Daily Rush</button>
            <button class="icon-btn" title="Free Climb">Free Climb</button>
            <button class="icon-btn" title="Settings">Settings</button>
          </div>
        </div>

        <div class="center-panel">
          <h1 id="ts-headline">SCALE CLIMBER</h1>
          <p id="ts-subhead">Sing it. Lock it. Climb it.</p>

          <div class="cta-container">
            <button id="ts-cta-btn" class="primary-morph-btn">Enable Mic</button>
            <p id="ts-cta-helper" class="helper-text">We'll listen for pitch in real time.</p>
          </div>

          <div id="ts-voice-hint" class="voice-hint"></div>
        </div>

        <div id="ts-sr-status" class="sr-only" aria-live="polite"></div>
      </div>
    </div>

    <div id="loading-screen" class="screen active" role="status" aria-live="polite">
      <h1>üéµ Scale Climber</h1>
      <p>Loading game...</p>
    </div>

    <div id="start-screen" class="screen" role="main">
      <div class="content-constrained">
        <h1>üéµ Scale Climber</h1>
        <p class="tagline">Climb the musical mountain, one note at a time!</p>
        <nav aria-label="Game menu" class="menu-buttons">
          <button id="start-button" class="primary-button" aria-label="Start challenge mode">
            Start Game
          </button>
          <button id="practice-button" class="secondary-button" aria-label="Start practice mode (no time limit)">
            Practice Mode
          </button>
          <button id="settings-button" class="text-button" aria-label="Open settings menu">
            Settings
          </button>
        </nav>
        <div class="keyboard-hint" aria-label="Keyboard shortcuts">
          Press <kbd>?</kbd> for keyboard shortcuts
        </div>
      </div>
    </div>

    <div id="calibration-ready-screen" class="screen" role="main">
      <div class="content-constrained">
        <h2>üé§ Voice Calibration Guide</h2>
        <div class="calibration-instructions">
          <p><strong>Calibration detects your comfortable vocal range in two phases:</strong></p>

          <h3>Phase 1: Microphone Test (3 seconds)</h3>
          <ul>
            <li>Speak, hum, or sing any comfortable note</li>
            <li>We just need to confirm your microphone is working</li>
            <li>Volume should reach at least 5%</li>
          </ul>

          <h3>Phase 2: Range Detection (10 seconds)</h3>
          <ul>
            <li><strong>Sing continuously</strong> - Don't pause for long</li>
            <li><strong>Vary your pitch</strong> - Start low, go high, come back down</li>
            <li><strong>Use vowel sounds</strong> - "Ahh", "Ooh", "Eee" work best</li>
            <li><strong>Stay comfortable</strong> - Don't strain your voice</li>
            <li>Goal: Detect at least 10 clear notes</li>
          </ul>

          <div class="tip-box">
            <p class="tip">üí° <strong>Best Practices:</strong></p>
            <ul>
              <li>‚úì Use a quiet environment</li>
              <li>‚úì Sing clearly and sustain each note for 1-2 seconds</li>
              <li>‚úì Watch the real-time feedback (note name, volume %)</li>
              <li>‚úì If it says "0 notes detected" - sing louder or more clearly</li>
              <li>‚úó Avoid talking/whispering - use singing voice</li>
              <li>‚úó Avoid short, choppy sounds</li>
            </ul>
          </div>

          <p><strong>During calibration you'll see:</strong></p>
          <ul>
            <li><strong>‚ô™ C4, D4, etc.</strong> - The note you're currently singing</li>
            <li><strong>Vol: X%</strong> - Your microphone volume (aim for 10%+)</li>
            <li><strong>X notes detected</strong> - Progress toward the 10-note goal</li>
          </ul>
        </div>
        <nav aria-label="Calibration actions" class="menu-buttons">
          <button id="begin-calibration-button" class="primary-button" aria-label="Begin voice calibration">
            I'm Ready - Start Calibration
          </button>
          <button id="cancel-calibration-button" class="text-button" aria-label="Cancel and return to menu">
            Cancel
          </button>
        </nav>
      </div>
    </div>

    <div id="calibration-screen" class="screen" role="status" aria-live="polite">
      <div class="content-constrained">
        <h2>Voice Calibration</h2>
        <div id="calibration-content">
          <p id="calibration-instruction" aria-live="polite">Preparing microphone...</p>
          <div id="calibration-progress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
      </div>
    </div>

    <div id="game-screen" class="screen" role="main">
      <div id="main-content" tabindex="-1">
        <!-- Canvas for visual game representation -->
        <canvas id="game-canvas"
                role="img"
                aria-label="Game visualization showing character climbing musical stairs">
        </canvas>

        <!-- HUD with live regions for screen readers -->
        <div id="hud" role="region" aria-label="Game information">
          <div id="score" aria-label="Current score">
            Score: <span id="score-value" aria-live="polite">0</span>
          </div>
          <div id="current-note" aria-label="Target note">
            Target: <span id="note-value" aria-live="assertive">-</span>
          </div>
          <div id="combo" aria-label="Combo multiplier">
            Combo: <span id="combo-value" aria-live="polite">0</span>x
          </div>
        </div>

        <!-- Pitch feedback for screen readers -->
        <div id="pitch-feedback" aria-live="polite" aria-atomic="false" class="sr-only"></div>

        <!-- Game controls -->
        <div class="game-controls" role="group" aria-label="Game controls">
          <button id="pause-button"
                  class="icon-button"
                  aria-label="Pause game (Space key)">
            ‚è∏
          </button>
        </div>
      </div>
    </div>

    <div id="results-screen" class="screen" role="main">
      <div class="content-constrained">
        <h2>Challenge Complete!</h2>
        <div id="results-content" role="region" aria-label="Challenge results">
          <div class="grade" id="final-grade" aria-label="Final grade">-</div>
          <div class="score-display">
            <span class="label">Final Score:</span>
            <span id="final-score" class="value" aria-live="polite">0</span>
          </div>
          <div class="stats" id="stats-display" role="list" aria-label="Performance statistics"></div>
        </div>
        <nav aria-label="Results actions" class="menu-buttons">
          <button id="play-again-button"
                  class="primary-button"
                  aria-label="Play again (R key)">
            Play Again
          </button>
          <button id="menu-button"
                  class="secondary-button"
                  aria-label="Return to main menu">
            Main Menu
          </button>
        </nav>
      </div>
    </div>

    <div id="error-screen" class="screen" role="alert">
      <h2>‚ö†Ô∏è Error</h2>
      <p id="error-message">Something went wrong</p>
      <nav aria-label="Error actions" class="menu-buttons">
        <button id="retry-button"
                class="primary-button"
                aria-label="Retry">
          Retry
        </button>
        <button id="error-menu-button"
                class="secondary-button"
                aria-label="Return to main menu">
          Main Menu
        </button>
      </nav>
    </div>

    <!-- Keyboard help overlay -->
    <div id="help-overlay" class="overlay" role="dialog" aria-labelledby="help-title" aria-modal="true" hidden>
      <div class="overlay-content">
        <h2 id="help-title">Keyboard Shortcuts</h2>
        <table role="table" aria-label="Keyboard controls">
          <thead>
            <tr>
              <th scope="col">Key</th>
              <th scope="col">Action</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><kbd>Space</kbd></td>
              <td>Pause/Resume game</td>
            </tr>
            <tr>
              <td><kbd>Esc</kbd></td>
              <td>Pause game or go back</td>
            </tr>
            <tr>
              <td><kbd>R</kbd></td>
              <td>Restart challenge</td>
            </tr>
            <tr>
              <td><kbd>M</kbd></td>
              <td>Toggle audio mute</td>
            </tr>
            <tr>
              <td><kbd>H</kbd></td>
              <td>Toggle HUD visibility</td>
            </tr>
            <tr>
              <td><kbd>P</kbd></td>
              <td>Start practice mode</td>
            </tr>
            <tr>
              <td><kbd>?</kbd></td>
              <td>Show/hide this help</td>
            </tr>
            <tr>
              <td><kbd>Tab</kbd></td>
              <td>Navigate between elements</td>
            </tr>
            <tr>
              <td><kbd>Enter</kbd></td>
              <td>Activate focused button</td>
            </tr>
          </tbody>
        </table>
        <button id="close-help" class="primary-button" aria-label="Close help">Close</button>
      </div>
    </div>
  </div>

</body>
</html>
